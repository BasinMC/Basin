From cfef98e59f7c45c2197a8d82f1bad75795c7911a Mon Sep 17 00:00:00 2001
From: 0x277F <0x277F@gmail.com>
Date: Tue, 28 Jun 2016 15:55:48 -0600
Subject: [PATCH] Expose MinecraftServer stopServer method


diff --git a/net/minecraft/server/MinecraftServer.java b/net/minecraft/server/MinecraftServer.java
index b6ebe74..3ab2b4f 100644
--- a/net/minecraft/server/MinecraftServer.java
+++ b/net/minecraft/server/MinecraftServer.java
@@ -342,7 +342,7 @@ public abstract class MinecraftServer
     }
   }
 
-  protected void stopServer() {
+  public void stopServer() { // Basin - private->public
     LOG.info("Stopping server");
     if (this.getNetworkSystem() != null) {
       this.getNetworkSystem().terminateEndpoints();
@@ -713,13 +713,13 @@ public abstract class MinecraftServer
       }
 
       var12.startServerThread();
-      Runtime.getRuntime()
+      /*Runtime.getRuntime()
           .addShutdownHook(
               new Thread("Server Shutdown Thread") {
                 public void run() {
                   var12.stopServer();
                 }
-              });
+              });*/ // Basin - Use our own shutdown hook.
     } catch (Exception var14) {
       LOG.fatal("Failed to start the minecraft server", var14);
     }
-- 
2.7.4

